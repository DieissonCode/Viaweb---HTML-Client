/* RESET GLOBAL */
* { margin:0; padding:0; box-sizing:border-box; }

/* VARIÁVEIS – DARK MODE (PADRÃO) */
:root { --primary:#2563eb; --primary-dark:#1e40af; --primary-light:#3b82f6; --success:#10b981; --success-dark:#059669; --danger:#ef4444; --danger-dark:#dc2626; --warning:#f59e0b; --bg-dark:#0f172a; --bg-card:#1e293b; --bg-hover:#334155; --text-primary:#f1f5f9; --text-secondary:#cbd5e1; --border:#475569; --shadow:rgba(0,0,0,.3); --gradient-start:#0f172a; --gradient-end:#1e293b; }

/* VARIÁVEIS – LIGHT MODE */
body.light-mode { --bg-dark:#f8fafc; --bg-card:#ffffff; --bg-hover:#e2e8f0; --text-primary:#0f172a; --text-secondary:#475569; --border:#cbd5e1; --shadow:rgba(0,0,0,.1); }

/* HTML / BODY */
html, body { height:100vh; overflow:hidden; margin:0; padding:0; }
body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; background:linear-gradient(135deg,var(--gradient-start) 0%,var(--gradient-end) 100%); color:var(--text-primary); padding:10px; line-height:1.4; transition:background .3s ease,color .3s ease; display:flex; flex-direction:column; gap:10px; }

/* CABEÇALHO */
h1 { text-align:center; font-size:1.5rem; font-weight:700; margin:0; display:flex; align-items:center; justify-content:center; gap:12px; padding:12px 20px; background:var(--bg-card); border-radius:8px; box-shadow:0 2px 4px var(--shadow); position:relative; flex-shrink:0; }

/* STATUS DE CONEXÃO */
#status-text { animation:pulse 2s infinite; transition:.3s; }
#status-icon { width:12px; height:12px; border-radius:50%; animation:pulse 2s infinite; }
.connected #status-icon { background:var(--success); box-shadow:0 0 10px var(--success); }
.disconnected #status-icon { background:var(--danger); box-shadow:0 0 10px var(--danger); }
.connected #status-text { color:var(--success); text-shadow:0 0 10px var(--success); }
.disconnected #status-text { color:var(--danger); text-shadow:0 0 10px var(--danger); }

/* ANIMAÇÕES */
@keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:.5;} }

/* BOTÃO DE TEMA */
.theme-toggle { position:absolute; right:20px; background:var(--bg-hover); border:2px solid var(--border); border-radius:50%; width:40px; height:40px; font-size:20px; cursor:pointer; transition:.3s; display:flex; align-items:center; justify-content:center; padding:0; }
.theme-toggle:hover { transform:scale(1.1); box-shadow:0 4px 8px var(--shadow); }
body.light-mode .theme-toggle { background:var(--bg-card); }

/* PAINEL DE CONTROLE */
#control-panel { background:var(--bg-card); border-radius:12px; padding:24px; margin-bottom:24px; box-shadow:0 4px 6px var(--shadow); }

/* SELECT / INPUT */
#unit-select-container { display:grid; grid-template-columns:auto 3fr 2fr; align-items:center; }
label { font-weight:600; color:var(--text-secondary); font-size:13px; }
input[type="text"], select { background:var(--bg-dark); border:2px solid var(--border); color:var(--text-primary); padding:8px 10px; border-radius:6px; font-size:13px; transition:.3s; }
input[type="password"], select { background:var(--bg-dark); border:2px solid var(--border); color:var(--text-primary); padding:8px 10px; border-radius:6px; font-size:13px; transition:.3s; }
input[type="text"]:focus, select:focus { outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(37,99,235,.1); }

/* CLIENTE */
#client-info { display:flex; align-items:center; gap:12px; padding:12px; background:var(--bg-dark); border-radius:6px; margin-bottom:12px; border-left:4px solid var(--primary); }
#client-number { font-weight:600; color:var(--primary-light); }

/* CHECKBOX */
input[type="checkbox"] { width:16px; height:16px; cursor:pointer; accent-color:var(--primary); }

/* BOTÕES */
button { background:var(--primary); color:#fff; border:none; padding:8px 16px; border-radius:6px; font-size:13px; font-weight:600; cursor:pointer; transition:.3s; box-shadow:0 2px 4px var(--shadow); }
button:hover:not(:disabled) { background:var(--primary-dark); transform:translateY(-1px); box-shadow:0 4px 6px var(--shadow); }
button:disabled { opacity:.5; cursor:not-allowed; }
#arm-button { background:var(--success); }
#arm-button:hover:not(:disabled) { background:var(--success-dark); }
#disarm-button { background:var(--danger); }
#disarm-button:hover:not(:disabled) { background:var(--danger-dark); }

/* CONTADORES */
.zone-count { display:inline-block; padding:6px 12px; background:var(--bg-dark); border-radius:6px; margin-left:8px; font-weight:600; }
#total-zones { color:var(--primary-light); }

/* LAYOUT */
hr { border:none; border-top:2px solid var(--border); margin:12px 0; }
.container { display:grid; grid-template-columns:1fr 2fr; gap:12px; }

/* PARTIÇÕES / ZONAS */
#partitions-list, #zones-list { background:var(--bg-dark); padding:10px; border-radius:8px; }
.partition-item, .zone-item { padding:10px; margin-bottom:8px; background:var(--bg-card); border-radius:6px; transition:.2s; display:flex; align-items:center; gap:10px; width:100%; }
.partition-item:hover, .zone-item:hover { background:var(--bg-hover); }
.partition-item label, .zone-item label { cursor:pointer; flex:1; }
.partition-status, .zone-status { padding:4px 10px; border-radius:4px; font-weight:300; font-size:12px; text-transform:uppercase; }

/* STATUS DE PARTIÇÕES / ZONAS */
.armado { background:rgba(16,185,129,.2); color:var(--success); }
.desarmado { background:rgba(239,68,68,.2); color:var(--danger); }
.ok { background:rgba(16,185,129,.2); color:var(--success); }
.aberto, .disparada { background:rgba(239,68,68,.2); color:var(--danger); }
.tamper { background:rgba(245,158,11,.2); color:var(--warning); }

/* TIPOGRAFIA MONO */
.mono-number { font-family:'Courier New',monospace; font-weight:700; color:var(--primary-light); }

/* COLUNAS DE ZONAS */
#zones-columns { display:grid; column-gap:12px; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); }

/* EVENTOS – CONTAINER */
#events-container { background:var(--bg-card); border-radius:8px; padding:16px; box-shadow:0 2px 4px var(--shadow); display:flex; flex-direction:column; gap:8px; overflow:hidden; flex:1; min-height:0; }

/* FILTRO DE EVENTOS */
#events-filter { width:100%; padding:8px; background:var(--bg-dark); border:2px solid var(--border); color:var(--text-primary); border-radius:6px; flex-shrink:0; font-size:13px; }
#events-filter:focus { outline:none; border-color:var(--primary); }

/* ABAS */
#events-tabs { display:flex; gap:4px; flex-shrink:0; flex-wrap:wrap; }
.tab-btn { background:var(--bg-dark); color:var(--text-secondary); border:none; padding:6px 10px; border-radius:6px 6px 0 0; cursor:pointer; font-size:12px; }
.tab-btn.active { background:var(--bg-card); color:var(--text-primary); }
.tab-btn[data-tab="all"].active { border-left:6px solid #64748b; }
.tab-btn[data-tab="alarms"].active { border-left:6px solid #ef4444; }
.tab-btn[data-tab="pendentes"].active { border-left:6px solid #f59e0b; }
.tab-btn[data-tab="sistema"].active { border-left:6px solid #a78bfa; }
.tab-btn[data-tab="usuarios"].active { border-left:6px solid #3b82f6; }
.tab-btn[data-tab="historico"].active { border-left:6px solid #475569; }

/* TABELA DE EVENTOS */
#events-table { flex:1; display:flex; flex-direction:column; overflow:hidden; min-height:0; }
#events-table table { width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
#events-table thead { background:var(--bg-dark); position:sticky; top:0; z-index:1; }
#events-table tbody { display:block; overflow-y:auto; flex:1; }
#events-table tr { display:table; width:100%; table-layout:fixed; }
#events-table th, #events-table td { padding:6px 8px; text-align:left; border-bottom:1px solid var(--border); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; font-size:12px; }
#events-table th { font-weight:600; color:var(--text-secondary); border-bottom:2px solid var(--border); }
#events-table th:nth-child(1), #events-table td:nth-child(1) { width:10%; }
#events-table th:nth-child(2), #events-table td:nth-child(2) { width:12%; }
#events-table th:nth-child(3), #events-table td:nth-child(3) { width:10%; }
#events-table th:nth-child(4), #events-table td:nth-child(4) { width:12%; }
#events-table th:nth-child(5), #events-table td:nth-child(5) { width:16%; }
#events-table th:nth-child(6), #events-table td:nth-child(6) { width:40%; }

/* LINHAS DE EVENTOS */
.event-row { transition:.2s; }
.event-row:hover { background:var(--bg-hover); }

/* TIPOS DE EVENTOS */
.alarm { background:rgb(153, 33, 33); border-left:4px solid #ef4444; }
.restauro { background:rgba(22,101,52,.3); border-left:4px solid #10b981; }
.falha { background:rgba(124,45,18,.3); border-left:4px solid #f59e0b; }
.armedisarm { background:rgba(30,58,138,.3); border-left:4px solid #3b82f6; }
.teste { background:rgba(22,78,99,.3); border-left:4px solid #06b6d4; }
.offline { background:rgba(127,29,29,.3); border-left:4px solid #dc2626; }
.online { background:rgba(5,150,105,.3); border-left:4px solid #059669; }
.inibida { background:rgba(75,75,73,.432); color:#ffffff; border-left:4px solid #4d4d4d; }

/* MODAL BASE */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.7); backdrop-filter:blur(4px); z-index:1000; }
.modal-content { background:var(--bg-card); padding:24px; border-radius:8px; max-width:500px; width:90%; margin:1% auto; box-shadow:0 20px 25px -5px rgba(0,0,0,.5); }
.modal-content h2 { margin-bottom:12px; color:var(--primary-light); font-size:1.2rem; }
.modal-content p { margin-bottom:12px; color:var(--text-secondary); font-size:13px; }

/* MODAL AVANÇADO */
.modal-content.modal-close-event { max-width:720px; width:92%; max-height:90vh; display:flex; flex-direction:column; gap:12px; overflow:hidden; }
.modal-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; border-bottom:1px solid var(--border); padding-bottom:8px; }
.eyebrow { text-transform:uppercase; letter-spacing:.08em; font-size:11px; color:var(--text-secondary); margin-bottom:4px; }
.badge-group { display:flex; gap:8px; align-items:center; }
.badge { display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:700; border:1px solid var(--border); background:var(--bg-dark); color:var(--text-primary); }
.badge-alarm { border-color:#ef4444; color:#ef4444; }

/* SEÇÕES DO MODAL */
.modal-section { display:flex; flex-direction:column; gap:10px; }
.section-title h3 { margin:0; font-size:14px; color:var(--text-primary); }
.history-list { max-height:260px; overflow-y:auto; display:flex; flex-direction:column; gap:10px; padding-right:4px; }
.event-history-item { background:var(--bg-dark); border:1px solid var(--border); border-radius:8px; padding:10px 12px; display:grid; gap:4px; }
.event-history-time { font-weight:700; color:var(--primary-light); font-size:12px; }
.event-history-desc { font-size:13px; }
.event-history-meta { font-size:11px; color:var(--text-secondary); }

/* Histórico em tabela dentro do modal */
.history-table-wrapper { max-height:260px; overflow:auto; border:1px solid var(--border); border-radius:8px; }
.history-table { width:100%; border-collapse:collapse; font-size:12px; }
.history-table thead { position:sticky; top:0; background:var(--bg-dark); z-index:2; }
.history-table th, .history-table td { padding:8px; border-bottom:1px solid var(--border); text-align:left; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
.history-table tbody tr:hover { background:var(--bg-hover); }
.history-table td.meta { color:var(--text-secondary); }

/* RODAPÉ DO MODAL */
.modal-footer { margin-top:auto; display:flex; gap:10px; justify-content:flex-end; padding-top:10px; }
button.ghost { background:var(--bg-dark); color:var(--text-primary); }
button.ghost:hover { background:var(--border); }

/* TEXTAREA */
textarea { width:100%; min-height:100px; background:var(--bg-dark); border:2px solid var(--border); color:var(--text-primary); padding:10px; border-radius:6px; font-family:inherit; font-size:13px; resize:vertical; margin-bottom:12px; }
textarea:focus { outline:none; border-color:var(--primary); }
.modal-content button { margin-right:8px; }
#cancelCloseEvent { background:var(--bg-dark); }
#cancelCloseEvent:hover { background:var(--border); }

/* TOOLTIP DE USUÁRIO */
.user-tooltip { background:var(--bg-card); border:2px solid var(--primary); color:var(--text-primary); padding:12px; border-radius:8px; font-size:12px; box-shadow:0 4px 12px rgba(0,0,0,.3); max-width:300px; white-space:pre-line; line-height:1.6; pointer-events:none; }

/* RESPONSIVO */
@media (max-width:1200px) { .container { grid-template-columns:1fr; } }
@media (max-width:768px) { #unit-select-container { grid-template-columns:1fr; } h1 { font-size:1.2rem; } #zones-columns { grid-template-columns:1fr; } body { padding:5px; } .panels-container { gap:5px; } }

/* DROPDOWN SEMPRE ABERTO */
#unit-select { height:auto !important; overflow-y:auto; padding:4px; }
#unit-select option { padding:6px 10px; cursor:pointer; border-radius:4px; margin:2px 0; font-size:12px; }
#unit-select option:hover { background:var(--bg-hover); }
#unit-select option:checked { background:var(--primary); color:#ffffff; }

/* STATUS DA CENTRAL */
.client-status { font-size:12px; color:var(--text-secondary); margin-left:8px; }
.client-status.online { color:var(--success); }
.client-status.offline { color:var(--danger); }

/* Barra de status do usuário */
#auth-status-bar { display:flex; align-items:center; justify-content:flex-end; gap:10px; background:var(--bg-card); border-radius:6px; padding:8px 12px; box-shadow:0 2px 4px var(--shadow); }
#auth-user-label { font-size:13px; color:var(--text-secondary); }
button.small { padding:6px 12px; font-size:12px; }

/* Modal de auth reaproveita base */
.auth-modal { display:none; }
.auth-modal-content { max-width:420px; width:92%; gap:12px; }
.auth-error { background:rgba(239,68,68,.12); color:#fecdd3; border:1px solid var(--danger); border-radius:6px; padding:8px 10px; font-size:12px; }